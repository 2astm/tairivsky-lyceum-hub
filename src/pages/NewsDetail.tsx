
import React, { useEffect } from 'react';
import { useParams, Link, useNavigate } from 'react-router-dom';
import { ArrowLeft, Calendar, Tag } from 'lucide-react';
import Header from '@/components/layout/Header';
import Footer from '@/components/layout/Footer';
import { Button } from '@/components/ui/button';
import { Separator } from '@/components/ui/separator';
import { NewsItem } from '@/components/ui/NewsCard';
import { useToast } from '@/components/ui/use-toast';

// Use the same mock data as in the News.tsx file
const news: NewsItem[] = [
  {
    id: '1',
    title: 'Перемога на олімпіаді з математики',
    excerpt: 'Наші учні здобули перше місце на обласній олімпіаді з математики. Вітаємо переможців та їхніх наставників!',
    date: '15 квітня 2023',
    image: 'https://images.unsplash.com/photo-1518133910546-b6c2fb7d79e3?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=735&q=80',
    category: 'Досягнення',
    content: `
      <p>Ми з гордістю повідомляємо, що команда нашого ліцею виборола перше місце на обласній олімпіаді з математики!</p>
      
      <p>Змагання відбулося в Одеському обласному інституті удосконалення вчителів, де учні з різних шкіл області демонстрували свої знання та навички з математики. Наші учні показали виняткове розуміння складних математичних концепцій та блискуче розв'язали всі завдання.</p>
      
      <p>Особливо хочемо відзначити таких учнів:</p>
      <ul>
        <li>Олександр Петренко (11-А клас) - I місце в індивідуальному заліку</li>
        <li>Марія Коваленко (10-Б клас) - II місце в індивідуальному заліку</li>
        <li>Дмитро Сидоренко (9-В клас) - III місце в індивідуальному заліку</li>
      </ul>
      
      <p>Також ми висловлюємо щиру подяку нашим викладачам математики, які підготували учнів до цієї олімпіади:</p>
      <ul>
        <li>Ірині Олександрівні Волошиній</li>
        <li>Миколі Петровичу Савченку</li>
      </ul>
      
      <p>Цей успіх є результатом наполегливої праці, відданості та любові до математики як учнів, так і їхніх наставників.</p>
      
      <p>Ми вітаємо переможців та бажаємо їм подальших успіхів у вивченні математики та участі в інших змаганнях!</p>
    `
  },
  {
    id: '2',
    title: 'Новий навчальний рік: важлива інформація',
    excerpt: 'Шановні учні та батьки! Повідомляємо важливу інформацію щодо початку нового навчального року та організації навчального процесу.',
    date: '28 серпня 2023',
    image: 'https://images.unsplash.com/photo-1503676260728-1c00da094a0b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1622&q=80',
    category: 'Оголошення',
    content: `
      <p>Шановні учні та батьки!</p>
      
      <p>Адміністрація Таїровського ліцею раді повідомити вам важливу інформацію щодо початку нового 2023-2024 навчального року.</p>
      
      <h3>Початок навчального року</h3>
      <p>Урочиста лінійка, присвячена Дню знань, відбудеться 1 вересня о 9:00 на подвір'ї ліцею. Просимо учнів прибути о 8:30 для організованого шикування.</p>
      
      <h3>Розклад занять</h3>
      <p>Навчання розпочнеться 2 вересня згідно з розкладом, який буде доступний на нашому сайті та інформаційних стендах ліцею з 30 серпня.</p>
      
      <h3>Форма одягу</h3>
      <p>Нагадуємо, що всі учні повинні дотримуватися ділового стилю одягу:</p>
      <ul>
        <li>Для хлопців: темні штани, біла або світла сорочка, піджак або жилет темного кольору</li>
        <li>Для дівчат: темна спідниця або штани, біла або світла блузка, піджак або жилет темного кольору</li>
      </ul>
      
      <h3>Батьківські збори</h3>
      <p>Графік проведення батьківських зборів:</p>
      <ul>
        <li>1-4 класи: 5 вересня о 18:00</li>
        <li>5-8 класи: 6 вересня о 18:00</li>
        <li>9-11 класи: 7 вересня о 18:00</li>
      </ul>
      
      <h3>Харчування</h3>
      <p>Організація харчування розпочнеться з 4 вересня. Батькам, які бажають оформити безкоштовне харчування для своїх дітей, необхідно подати відповідні документи до 10 вересня.</p>
      
      <p>З усіх питань організації навчального процесу ви можете звертатися до класних керівників або адміністрації ліцею.</p>
      
      <p>Бажаємо всім успішного та плідного навчального року!</p>
    `
  },
  {
    id: '3',
    title: 'Екскурсія до музею науки',
    excerpt: 'Учні 7-х класів відвідали музей науки, де ознайомилися з інтерактивними експонатами та новими технологіями.',
    date: '5 березня 2023',
    image: 'https://images.unsplash.com/photo-1503428593586-e225b39bddfe?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80',
    category: 'Події',
    content: `
      <p>5 березня 2023 року учні 7-х класів нашого ліцею відвідали Музей науки і технологій в рамках освітньої програми з фізики та природознавства.</p>
      
      <p>Під час екскурсії учні мали можливість ознайомитися з численними інтерактивними експонатами, які демонструють різноманітні фізичні явища та закони. Особливий інтерес викликала зона робототехніки, де діти змогли побачити в дії сучасних роботів та навіть спробувати керувати деякими з них.</p>
      
      <p>Учні також взяли участь у науковому шоу, де демонструвалися яскраві хімічні експерименти та фізичні явища. Багато з них зазначили, що побачене допомогло їм краще зрозуміти теоретичний матеріал, який вони вивчали на уроках.</p>
      
      <p>Екскурсію організувала вчителька фізики Ольга Василівна Коваленко за підтримки класних керівників 7-х класів. Супровід групи забезпечували також вчителі біології та хімії.</p>
      
      <p>Подібні виїзні заходи є важливою частиною освітнього процесу в нашому ліцеї, оскільки вони допомагають учням побачити практичне застосування теоретичних знань та розширити свій кругозір.</p>
      
      <p>Ми плануємо організувати подібні екскурсії і для інших класів у наступних місяцях.</p>
    `
  },
  {
    id: '4',
    title: 'Творчий конкурс "Моя Україна"',
    excerpt: 'Запрошуємо учнів взяти участь у творчому конкурсі "Моя Україна". Приймаються роботи в категоріях: малюнок, вірш, есе, фотографія.',
    date: '10 вересня 2023',
    image: 'https://images.unsplash.com/photo-1568470466200-23ad81072278?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80',
    category: 'Конкурси',
    content: `
      <p>Шановні учні та батьки!</p>
      
      <p>Таїровський ліцей оголошує про початок творчого конкурсу "Моя Україна", присвяченого Дню незалежності України.</p>
      
      <h3>Категорії конкурсу:</h3>
      <ul>
        <li><strong>Образотворче мистецтво</strong> - малюнки, виконані в будь-якій техніці (акварель, гуаш, олівці, пастель тощо).</li>
        <li><strong>Література</strong> - вірші, есе, оповідання.</li>
        <li><strong>Фотографія</strong> - знімки природи України, архітектурних пам'яток, моментів з життя.</li>
        <li><strong>Відеоролики</strong> - короткі відео (до 3 хвилин) про Україну, її культуру, історію, сучасність.</li>
      </ul>
      
      <h3>Вікові категорії:</h3>
      <ul>
        <li>Молодша (1-4 класи)</li>
        <li>Середня (5-8 класи)</li>
        <li>Старша (9-11 класи)</li>
      </ul>
      
      <h3>Терміни проведення:</h3>
      <ul>
        <li>Прийом робіт: з 10 вересня по 10 жовтня 2023 року</li>
        <li>Оцінювання журі: з 11 по 20 жовтня 2023 року</li>
        <li>Оголошення результатів: 25 жовтня 2023 року</li>
        <li>Нагородження переможців: 30 жовтня 2023 року</li>
      </ul>
      
      <p>Роботи можна подавати класним керівникам або в кабінет 205 (відповідальна особа - Ірина Володимирівна, вчитель української мови та літератури).</p>
      
      <p>Переможці в кожній категорії отримають цінні призи, а всі учасники - дипломи за участь.</p>
      
      <p>За додатковою інформацією звертайтеся до організаторів конкурсу:</p>
      <ul>
        <li>Телефон: (048) 123-45-67</li>
        <li>Email: konkurs@tairivsky-lyceum.od.ua</li>
      </ul>
      
      <p>Чекаємо на ваші творчі роботи!</p>
    `
  },
  {
    id: '5',
    title: 'Зустріч з випускниками',
    excerpt: 'У нашому ліцеї відбулась традиційна зустріч з випускниками. Колишні учні поділилися своїм досвідом та історіями успіху.',
    date: '20 лютого 2023',
    image: 'https://images.unsplash.com/photo-1523580494863-6f3031224c94?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80',
    category: 'Події',
    content: `
      <p>20 лютого 2023 року в стінах нашого ліцею відбулася традиційна щорічна зустріч з випускниками різних років.</p>
      
      <p>Захід зібрав понад 50 колишніх учнів, серед яких були випускники як останніх років, так і ті, хто закінчив ліцей 10, 20 і навіть 30 років тому. Особливо приємно було бачити випускників, які приїхали з різних міст України та з-за кордону.</p>
      
      <h3>Програма зустрічі</h3>
      <p>Зустріч розпочалася з екскурсії по ліцею, під час якої випускники мали можливість побачити, як змінився заклад за роки їхньої відсутності. Багато хто був приємно вражений новими мультимедійними класами, спортивним залом після реконструкції та сучасною бібліотекою.</p>
      
      <p>Після екскурсії відбулася офіційна частина у актовій залі, де директор ліцею Марія Іванівна Петренко привітала випускників і розповіла про досягнення ліцею за останні роки. Випускники різних років також виступили зі своїми спогадами та побажаннями.</p>
      
      <p>Особливо цікавою частиною програми стала панельна дискусія "Шлях до успіху", в якій взяли участь випускники, які досягли значних успіхів у різних сферах:</p>
      <ul>
        <li>Олексій Ковальчук (випуск 2000) - відомий ІТ-підприємець</li>
        <li>Наталія Шевченко (випуск 2005) - лікар-кардіолог</li>
        <li>Сергій Мельник (випуск 2010) - науковець, працює в NASA</li>
        <li>Анна Соколова (випуск 2015) - журналістка міжнародного видання</li>
      </ul>
      
      <p>Вони поділилися своїм досвідом, розповіли про свій професійний шлях та дали поради нинішнім учням ліцею, які також були присутні на зустрічі.</p>
      
      <p>Завершився захід неформальним спілкуванням випускників з учителями та між собою в шкільній їдальні, де були підготовлені святкові столи.</p>
      
      <p>Ми дякуємо всім випускникам, які знайшли час відвідати рідний ліцей, і запрошуємо на наступну зустріч, яка традиційно відбудеться в лютому наступного року.</p>
    `
  },
  {
    id: '6',
    title: 'Нові гуртки та секції',
    excerpt: 'З нового навчального року в нашому ліцеї починають роботу нові гуртки: робототехніка, програмування, шахи та художня студія.',
    date: '5 вересня 2023',
    image: 'https://images.unsplash.com/photo-1573164574572-cb89e39749b4?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1469&q=80',
    category: 'Оголошення',
    content: `
      <p>Шановні учні та батьки!</p>
      
      <p>Раді повідомити, що з нового 2023-2024 навчального року в нашому ліцеї починають роботу нові гуртки та секції, які допоможуть учням розвинути свої таланти та набути нових навичок.</p>
      
      <h3>Нові гуртки та секції:</h3>
      
      <h4>1. Гурток робототехніки "Майбутні інженери"</h4>
      <p>Учні матимуть можливість вивчати основи робототехніки, створювати власних роботів та програмувати їх. Заняття проводитимуться з використанням наборів LEGO Mindstorms та Arduino.</p>
      <p><strong>Для кого:</strong> учні 5-11 класів</p>
      <p><strong>Керівник:</strong> Олексій Петрович Савченко, вчитель інформатики</p>
      <p><strong>Розклад:</strong> вівторок, четвер 15:00-16:30, кабінет 304</p>
      
      <h4>2. Гурток програмування "Code Masters"</h4>
      <p>На заняттях учні вивчатимуть сучасні мови програмування (Python, JavaScript), основи веб-розробки та створення мобільних додатків.</p>
      <p><strong>Для кого:</strong> учні 7-11 класів</p>
      <p><strong>Керівник:</strong> Ірина Олександрівна Коваль, вчитель інформатики</p>
      <p><strong>Розклад:</strong> понеділок, середа 15:00-16:30, кабінет 305</p>
      
      <h4>3. Шаховий клуб "Гамбіт"</h4>
      <p>Заняття шахами сприяють розвитку логічного мислення, пам'яті та концентрації уваги. Учні вивчатимуть теорію шахів та братимуть участь у турнірах.</p>
      <p><strong>Для кого:</strong> учні 1-11 класів (групи за віком)</p>
      <p><strong>Керівник:</strong> Микола Іванович Кравченко, міжнародний шаховий майстер</p>
      <p><strong>Розклад:</strong> понеділок, п'ятниця 15:00-16:30, кабінет 210</p>
      
      <h4>4. Художня студія "Палітра"</h4>
      <p>У студії діти зможуть освоїти різні техніки малювання, живопису, графіки, а також ознайомитися з історією мистецтва.</p>
      <p><strong>Для кого:</strong> учні 1-11 класів (групи за віком)</p>
      <p><strong>Керівник:</strong> Олена Василівна Мельник, вчитель образотворчого мистецтва</p>
      <p><strong>Розклад:</strong> вівторок, четвер 15:00-16:30, кабінет 201</p>
      
      <h3>Як записатися на гурток?</h3>
      <p>Для запису на гурток необхідно заповнити анкету, яку можна отримати у класного керівника або в кабінеті 110 (заступник директора з виховної роботи).</p>
      
      <p>Кількість місць у групах обмежена, тому радимо не зволікати із записом.</p>
      
      <p>Додаткову інформацію можна отримати за телефоном: (048) 123-45-67 або у заступника директора з виховної роботи Наталії Петрівни Ковальчук.</p>
      
      <p>Запрошуємо всіх бажаючих долучитися до позакласної діяльності нашого ліцею!</p>
    `
  }
];

const NewsDetail: React.FC = () => {
  const { id } = useParams<{ id: string }>();
  const navigate = useNavigate();
  const { toast } = useToast();
  
  // Find the specific news item
  const newsItem = news.find(item => item.id === id);
  
  useEffect(() => {
    if (!newsItem) {
      toast({
        title: "Новину не знайдено",
        description: "Запитана новина не існує або була видалена",
        variant: "destructive"
      });
      navigate('/news');
    }
    // Scroll to top when news detail page loads
    window.scrollTo(0, 0);
  }, [id, newsItem, toast, navigate]);
  
  if (!newsItem) return null;
  
  return (
    <div className="min-h-screen flex flex-col">
      <Header />
      
      <main className="flex-grow pt-24 pb-16">
        <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="mb-8">
            <Button 
              variant="outline" 
              size="sm" 
              onClick={() => navigate('/news')}
              className="mb-6"
            >
              <ArrowLeft className="mr-2 h-4 w-4" />
              Назад до новин
            </Button>
            
            {newsItem.image && (
              <div className="w-full h-[400px] rounded-xl overflow-hidden mb-8">
                <img
                  src={newsItem.image}
                  alt={newsItem.title}
                  className="w-full h-full object-cover"
                />
              </div>
            )}
            
            <div className="flex flex-wrap gap-4 items-center mb-4">
              <div className="flex items-center text-gray-500">
                <Calendar className="h-4 w-4 mr-2" />
                <span>{newsItem.date}</span>
              </div>
              
              {newsItem.category && (
                <div className="flex items-center">
                  <Tag className="h-4 w-4 mr-2 text-blue-600" />
                  <span className="bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded">
                    {newsItem.category}
                  </span>
                </div>
              )}
            </div>
            
            <h1 className="text-3xl md:text-4xl font-bold text-gray-900 mb-6">
              {newsItem.title}
            </h1>
            
            <Separator className="my-6" />
            
            <div 
              className="prose prose-blue max-w-none prose-headings:text-gray-800 prose-p:text-gray-600 prose-li:text-gray-600"
              dangerouslySetInnerHTML={{ __html: newsItem.content || '' }}
            />
          </div>
        </div>
      </main>
      
      <Footer />
    </div>
  );
};

export default NewsDetail;
